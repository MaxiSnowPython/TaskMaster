
{% extends 'base/main.html' %}
{% load static %}

{% block css %}{% static "css/status.css" %}{% endblock css %}

{% block content %}
<div class="hub-container">
    <aside class="sidebar">
        <button class="sidebar-button add-team-btn">
            <span class="icon"><a href="{% url 'hub' %}">üè†</a></span>
        </button>
        <h2 class="sidebar-title">–ö–æ–º–∞–Ω–¥—ã</h2>
        {% if teams %}
            {% for team in teams %}
                <a href="{% url 'team' team.pk %}">
                    <button class="sidebar-button">{{ team.name }}</button>
                </a>
            {% endfor %}
        {% else %}
            <p>–ù–µ—Ç –∫–æ–º–∞–Ω–¥</p>
        {% endif %}
        <a href="{% url 'create_team' %}">
            <button class="sidebar-button add-team-btn">
                <span class="icon">+</span>
            </button>
        </a>
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="sidebar-button settings-btn">
                <span class="icon">üö™</span>
            </button>
        </form>
        <a href="{% url 'friendslist' %}">
            <button class="sidebar-button user-btn">
                <span class="icon">üë§</span>
            </button>
        </a>
    </aside>

    <!-- Main Content -->
    <div class="content-container">
        <h1>–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞ –≤ –∫–æ–º–∞–Ω–¥—É</h1>
        <form method="POST" action="{% url 'friendslist' %}" class="add-friend-form">
            {% csrf_token %}
            <label for="username">–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text" name="username" id="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É</button>
        </form>

        <div class="friend-requests">
            <h2>–í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥—Ä—É–∂–±—É</h2>
            {% if friend_requests %}
                <ul>
                    {% for friend_request in friend_requests %}
                        {% if not friend_request.is_rejected %}
                            <li>
                                –ó–∞–ø—Ä–æ—Å –æ—Ç: {{ friend_request.from_user.username }}
                                <div class="actions">

                                    <a href="{% url 'handle_friend_request' request_id=friend_request.id action='accept' %}">
                                        <button class="accept-btn">‚úîÔ∏è –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                                    </a>
                                    <a href="{% url 'handle_friend_request' request_id=friend_request.id action='reject' %}">
                                        <button class="reject-btn">‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                                        
                                    </a>
                                </div>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            {% else %}
                <p>–ù–µ—Ç –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –¥—Ä—É–∂–±—É.</p>
            {% endif %}
        </div>

        <div class="my-friends">
            <h2>–ú–æ–∏ –¥—Ä—É–∑—å—è</h2>
            {% if friends %}
                <ul>
                    {% for friend in friends %}
                        <li>{{ friend.username }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π.</p>
                
            {% endif %}
            {% if messages %}
            {% for message in messages %}
              <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        </div>
    </div>
</div>
{% endblock content %}