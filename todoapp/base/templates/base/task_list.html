{% extends 'base/main.html' %}
{% load static %}

{% block css %}
{% static 'css/tasks.css' %}
{% endblock css %}

{% block content %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2 class="sidebar-title">–ö–æ–º–∞–Ω–¥—ã</h2>
            {% if teams %}
            {% for team in teams %}
                <button class="sidebar-button" id="team1-btn">{{ team.name }}</button>
            {% endfor %}
        {% else %}
            <p>No teams found</p>
        {% endif %}
            <button class="sidebar-button add-team-btn">
                <span class="icon">+</span>
            </button>
            <button class="sidebar-button settings-btn">
                <span class="icon">‚öôÔ∏è</span>
            </button>
            <button class="sidebar-button user-btn">
                <span class="icon">üë§</span>
            </button>
        </aside>


       
        <!-- Team Members Panel -->
        {% for team in teams %}
        <aside class="team-members">
            <h2 class="panel-title">–ö–æ–º–∞–Ω–¥–∞: {{team.name}}</h2>

            {%endfor%}
    {% for team in teams %}
    {% for member in team.members.all %}
    <div class="team-member">

        
            <div class="member-info">
                <img src="alice.gif" alt="Alice" class="avatar">
                <div>
                    {% if  member == team.creator %}
                    <p class="member-name">{{ member.username }} üëë</p>
                    
                    {% else %}
                    <p class="member-name">{{ member.username }}</p>
                    {% endif %}
                    <p>–£—Ä–æ–≤–µ–Ω—å: 5</p>
                    <button class="assign-task-btn">–î–∞—Ç—å —Ç–∞—Å–∫</button>
                </div>
            </div>
        <br>
        <button class="remove-member-btn">–£–±—Ä–∞—Ç—å –∏–∑ –∫–æ–º–∞–Ω–¥—ã</button>
        
    </div>
    {% endfor %}
    {% endfor %}

            <button class="add-member-btn">–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
        </aside>

        <!-- Main Content (Tasks) -->
        <main class="main-content">
            {% for team in teams %}
            <h1 class="main-title">–ó–∞–¥–∞—á–∏ {{ team.name }}</h1>
            {% endfor %}
            <button class="add-task-btn">
                <span class="icon">+</span> –î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Å–∫
            </button>
            
            <div class="tasks">
                {% for task in tasks %}
                <div class="task-card">
                    <div class="task-content">
                        <h3 class="task-title">{{task.title}}</h3>
                        <p class="task-assigned">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: {{task.user}}</p>
                        {% for reward in rewards  %}
                        {% if reward.task == task %}
                        <p class="reward-xp">+{{reward.xp}}</p>
                        {% endif %}
                        {% endfor %}

                        <div class="task-actions">
                            <button class="edit-btn">‚úèÔ∏è</button>
                            <button class="delete-btn">üóëÔ∏è</button>
                            <button class="check-btn">‚úîÔ∏è</button>
                        </div>
                    </div>
                </div>
                    
                    {% endfor %}
                </div>
                
            </div>
            
        </main>

        <!-- Rewards Panel -->
        <aside class="rewards-panel">
            <h2 class="panel-title">–ù–∞–≥—Ä–∞–¥—ã</h2>
            {% for task in tasks  %}
            <div class="reward-card">
                <h3 class="reward-title">{{task.title}}</h3>
                {% for reward in rewards  %}
                {% if reward.task == task %}
                <p class="reward-xp">+{{reward.xp}}</p>
                {% endif %}
                {% endfor %}
            </div>
            {% endfor %}
        </aside>
    </div>
</body>
</html>



{% endblock content %}

