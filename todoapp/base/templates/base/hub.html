{% extends 'base/main.html' %}
{% load static %}

{% block css %}
  {% static "css/hub.css" %} 
{% endblock %}

{% block content %}

<!-- –°–∞–π–¥–±–∞—Ä —Ç–µ–ø–µ—Ä—å –í–ù–ï hub-container -->
<aside class="sidebar">
    <button class="sidebar-button add-team-btn">
        <span class="icon"><a href="{% url "hub" %}">üè†</a></span>
    </button>
    <h2 class="sidebar-title">–ö–æ–º–∞–Ω–¥—ã</h2>
    {% if teams %}
    {% for team in teams %}
    <a href = "{% url "team" team.pk %}">
        <button class="sidebar-button">{{ team.name }}</button>
    </a>
    {% endfor %}
{% else %}
    <p>No teams found</p>
{% endif %}
<a href = "{% url "create_team" %}">
    <button class="sidebar-button add-team-btn">
        <span class="icon">+</span>
    </button>
</a>

<form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <a href="{% url 'logout' %}">
        <button class="sidebar-button settings-btn">
            <span class="icon">üö™</span>
        </button>
    </a>
</form>
    <a href = "{% url "add_friend_to_team" %}">
    <button class="sidebar-button user-btn">
        <span class="icon">üë§</span>
    </button>

</a>
</aside>

<div class="hub-container">
    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <aside class="profile-sidebar">
        <img src="{% static 'images/avatar.png' %}" alt="Avatar" class="avatar">
        <h2>{{ user.username }}</h2>
        <p>–£—Ä–æ–≤–µ–Ω—å: {{ user.profile.level }}</p>
        <p>–û–ø—ã—Ç: {{ user.profile.xp }} XP</p>
        <button class="upgrade-btn">–ü—Ä–æ–∫–∞—á–∞—Ç—å –≥–µ—Ä–æ—è</button>
    </aside>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–¥–∞—á -->
    <main class="hub-main">
        <h1>RPG –•–ê–ë</h1>

        <section class="teams">
            <h2>–ú–æ–∏ –ö–æ–º–∞–Ω–¥—ã</h2>
            {% for team in teams %}
                <h3>{{ team.name }}</h3>
                <p>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {{ team.members.count }}</p>
            {% empty %}
                <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–∞–Ω–¥.</p>
            {% endfor %}
            
        </section>

        <section class="tasks">
            <h2>–ú–æ–∏ –ö–≤–µ—Å—Ç—ã</h2>
            {% for task in tasks %}
                <div class="task-card">
                    <h3>{{ task.title }}</h3>
                    <p>–ù–∞–≥—Ä–∞–¥–∞: +{{ task.reward.xp }} XP</p>
                    <button class="complete-btn">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                </div>
            {% empty %}
                <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤.</p>
            {% endfor %}
        </section>
    </main>

    <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –∏ –Ω–∞–≥—Ä–∞–¥—ã -->
    <aside class="leaderboard">
    

        <h2>–ù–∞–≥—Ä–∞–¥—ã</h2>
        {% for reward in rewards %}
            <div class="reward-card">
                <h3>{{ reward.task.title }}</h3>
                <p>+{{ reward.xp }} XP</p>
            </div>
        {% empty %}
            <p>–ù–µ—Ç –Ω–∞–≥—Ä–∞–¥.</p>
        {% endfor %}
    </aside>
</div>

{% endblock %}
